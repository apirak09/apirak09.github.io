<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jack & Nymph Anniversary</title>
    
    <!-- Google Fonts: 'Dancing Script' for headers, 'Prompt' for body text -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* --- CSS VARIABLES (Easy to change colors here) --- */
        :root {
            --bg-color: #1a0b14;        /* Dark romantic background */
            --primary-color: #ff4d6d;   /* Hot pink */
            --secondary-color: #ff8fa3; /* Soft pink */
            --text-color: #fff0f3;      /* Off-white text */
            --gold-color: #ffd700;      /* For coupons */
            --grid-size: 300px;         /* Size of the photo game */
        }

        /* --- GLOBAL STYLES --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Prompt', sans-serif;
            overflow-x: hidden;
            text-align: center;
            min-height: 100vh;
        }

        h1, h2, h3 {
            font-family: 'Dancing Script', cursive;
        }

        /* --- UTILITIES --- */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 2s ease-in forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- SHAKE ANIMATION (For uncompleted tasks) --- */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .shake-screen {
            animation: shake 0.5s;
            animation-iteration-count: 1;
        }

        /* --- TOAST NOTIFICATION --- */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: var(--primary-color);
            color: #fff;
            text-align: center;
            border-radius: 50px;
            padding: 16px;
            position: fixed;
            z-index: 200;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 2px solid white;
        }

        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }

        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }

        /* --- PHASE 1: LANDING (GIFT BOX) --- */
        #phase-1 {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 10;
        }

        .gift-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 5rem;
            animation: pulse 1.5s infinite;
            filter: drop-shadow(0 0 15px var(--primary-color));
        }

        .tap-text {
            margin-top: 20px;
            font-size: 1.2rem;
            color: var(--secondary-color);
            animation: bounce 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* --- PHASE 2: FIREWORKS CANVAS --- */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Let clicks pass through */
            z-index: 5;
        }

        /* --- PHASE 3: CONTENT (TIMER) --- */
        #phase-3 {
            padding: 40px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative; /* Added for z-index */
            z-index: 20;        /* Ensure content is ABOVE the fireworks */
        }

        .header-title {
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î font ‡∏•‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            font-size: 2.5rem; 
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 77, 109, 0.5);
            line-height: 1.2;
        }

        .sub-title {
            font-size: 1.2rem;
            margin-bottom: 40px;
            color: var(--secondary-color);
        }

        /* Timer Container */
        .timer-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 50px;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            padding: 15px;
            border-radius: 10px;
            min-width: 80px;
            border: 1px solid var(--primary-color);
        }

        .time-val {
            font-size: 2rem;
            font-weight: 600;
            display: block;
            color: #fff;
        }

        .time-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--secondary-color);
        }

        /* --- PHASE 4: PHOTO GAME --- */
        .game-section {
            margin: 30px 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .instruction {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .photo-grid {
            width: var(--grid-size);
            height: var(--grid-size);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            position: relative;
            /* ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö (‡∏ñ‡πâ‡∏≤‡∏•‡∏¥‡∏á‡∏Å‡πå Google ‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ó‡∏ô) */
            background-image: url('https://scontent.fbkk5-7.fna.fbcdn.net/v/t39.30808-6/607259788_25890060020624874_2934357777875612054_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeHLMdZl1mlF6P-AUqS283Djcj11wrTH_tpyPXXCtMf-2mohjbBHVZZZCuLhxLb7BL1LjOHI5nKbmi4dq6QE3ONV&_nc_ohc=MV1PPdzfs98Q7kNvwHim5pj&_nc_oc=Adn2Fw8hK4_1D6MwAOqeYvK3AYfUidlFsjY2V_ns7cZOmDAkL7KHqP4mdZhClNXY5HdvJoU__aL_Hi-CKNExgRis&_nc_zt=23&_nc_ht=scontent.fbkk5-7.fna&_nc_gid=LM7JNnR7Ruu4i03ZSqteCg&oh=00_AfnTzrg25rMm0W7dkJck2metDpWfcoIkAKTfSdIxhSg0-w&oe=695AEBA7'); 
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            /* Fallback color if image doesn't load */
            background-color: var(--secondary-color);
        }

        .grid-tile {
            background-color: var(--secondary-color);
            border: 1px solid rgba(255,255,255,0.5);
            cursor: pointer;
            transition: opacity 0.5s ease, transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .grid-tile:active {
            transform: scale(0.95);
        }

        .grid-tile.revealed {
            opacity: 0; /* Makes the div invisible, revealing the bg image */
            pointer-events: none;
        }

        /* --- PHASE 4.5: POLAROID GALLERY --- */
        .gallery-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin: 40px 0 20px 0;
            text-shadow: 0 0 5px rgba(255, 77, 109, 0.5);
        }

        .gallery-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            padding: 0 10px;
        }

        .polaroid {
            background: #fff;
            padding: 8px 8px 25px 8px; /* Extra bottom padding for classic look */
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            width: 140px; /* Mobile friendly width */
            transition: transform 0.3s, z-index 0.3s;
            position: relative;
            cursor: pointer; /* Change cursor to pointer */
        }

        .polaroid img {
            width: 100%;
            height: 140px; /* Square aspect ratio */
            object-fit: cover;
            display: block;
        }

        /* Random rotations for natural feel */
        .polaroid:nth-child(odd) { transform: rotate(-3deg); }
        .polaroid:nth-child(even) { transform: rotate(3deg); }
        .polaroid:nth-child(3n) { transform: rotate(-1deg); }
        .polaroid:nth-child(4n) { transform: rotate(2deg); }

        .polaroid:hover {
            transform: scale(1.1) rotate(0deg);
            z-index: 10;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
        }

        /* --- LIGHTBOX (ZOOM) --- */
        #lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none; /* Click through when hidden */
            transition: opacity 0.3s ease;
        }

        #lightbox.active {
            opacity: 1;
            pointer-events: auto;
        }

        .polaroid-large {
            background: #fff;
            padding: 15px 15px 50px 15px; /* Large Polaroid Padding */
            max-width: 90%;
            max-height: 90vh;
            transform: scale(0.8);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            border-radius: 4px;
            position: relative;
        }

        #lightbox.active .polaroid-large {
            transform: scale(1) rotate(-2deg); /* Add slight tilt */
        }

        .polaroid-large img {
            max-width: 100%;
            max-height: 75vh; /* Limit height to fit screen */
            display: block;
            object-fit: contain;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem;
            color: #fff;
            cursor: pointer;
            z-index: 101;
            font-family: sans-serif;
            text-shadow: 0 0 10px #000;
        }

        /* --- PHASE 5: BUCKET LIST (REPLACED COUPONS) --- */
        #final-surprise {
            margin-top: 50px;
            width: 100%;
            max-width: 500px;
            padding-bottom: 50px;
        }

        .message-card {
            background: #fff;
            color: #333;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            transform: rotate(-2deg);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        /* New Bucket List Styles */
        .bucket-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 15px;
            text-align: left;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 2px dashed var(--secondary-color);
        }

        .bucket-item {
            font-size: 1.2rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            transition: transform 0.2s;
            cursor: pointer; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° cursor pointer */
        }

        .bucket-item:hover {
            transform: translateX(5px);
            background: rgba(0, 0, 0, 0.5);
        }

        .check-box {
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: transparent;
        }

        /* Mock Checked State */
        .bucket-item.checked .check-box {
            background-color: var(--primary-color);
            color: white;
        }
        
        .bucket-item.checked span {
            text-decoration: line-through;
            opacity: 0.7;
        }

        .scroll-hint {
            margin-top: 20px;
            font-size: 0.9rem;
            opacity: 0.7;
            animation: bounce 2s infinite;
        }
    </style>
</head>
<body>

    <!-- BACKGROUND AUDIO -->
    <!-- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå mp3 ‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ music.mp3 ‡∏Ñ‡∏£‡∏±‡∏ö -->
    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <!-- FIREWORKS CANVAS -->
    <canvas id="fireworks-canvas"></canvas>

    <!-- LIGHTBOX (HIDDEN INITIALLY) -->
    <div id="lightbox" onclick="closeLightbox()">
        <span class="close-btn">&times;</span>
        <div class="polaroid-large" onclick="event.stopPropagation()">
            <img id="lightbox-img" src="" alt="Zoomed Memory">
        </div>
    </div>

    <!-- TOAST MESSAGE -->
    <div id="toast">Not accomplished yet! üòú</div>

    <!-- PHASE 1: MYSTERY -->
    <div id="phase-1">
        <button class="gift-btn" onclick="startCelebration()">üéÅ</button>
        <p class="tap-text">Tap to Open Gift</p>
    </div>

    <!-- PHASE 3: MAIN CONTENT (Hidden initially) -->
    <div id="phase-3" class="hidden">
        
        <!-- ROMANTIC HEADER -->
        <h1 class="header-title">Jack ‚ù§Ô∏è Nymph</h1>
        <p class="sub-title">Counting every second since we fell in love.</p>

        <!-- TIMER -->
        <div class="timer-container">
            <div class="time-box">
                <span class="time-val" id="days">0</span>
                <span class="time-label">Days</span>
            </div>
            <div class="time-box">
                <span class="time-val" id="hours">0</span>
                <span class="time-label">Hours</span>
            </div>
            <div class="time-box">
                <span class="time-val" id="minutes">0</span>
                <span class="time-label">Mins</span>
            </div>
            <div class="time-box">
                <span class="time-val" id="seconds">0</span>
                <span class="time-label">Secs</span>
            </div>
        </div>

        <p class="scroll-hint">Scroll down for a game üëá</p>

        <!-- PHASE 4: THE GAME -->
        <div class="game-section">
            <p class="instruction">Tap the tiles to reveal a memory!</p>
            <div class="photo-grid" id="photoGrid">
                <!-- 9 Tiles generated by JS or Hardcoded here -->
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
                <div class="grid-tile" onclick="revealTile(this)">‚ù§Ô∏è</div>
            </div>
        </div>

        <!-- PHASE 5: FINAL SURPRISE (Hidden until game done) -->
        <div id="final-surprise" class="hidden">
            <div class="message-card">
                <h2>Happy New Year!</h2>
                <p style="margin-top: 15px; font-size: 1.1rem; line-height: 1.6;">
                    "Thank you, Nymph, for being the happiness in my life. Wishing you a wonderful year ahead. Let's stay together forever. Love you, Nymph."
                </p>
                <p style="margin-top:15px; font-weight:bold;">Love, Jack</p>
            </div>

            <!-- NEW: GALLERY SECTION -->
            <h3 class="gallery-title">Our Sweet Memories</h3>
            <div class="gallery-container">
                <!-- ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡∏ó‡∏±‡πâ‡∏á 6 ‡∏£‡∏π‡∏õ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö -->
                <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° onclick ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏õ‡∏¥‡∏î Lightbox -->
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-6.fna.fbcdn.net/v/t39.30808-6/608504973_25890105377287005_5098495159301056656_n.webp?stp=dst-jpg_tt6&_nc_cat=102&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeFM6zmSC-P--VRiwsTTHNBzkMrauZjqrkCQytq5mOquQKFdVgLTke2BFrurZwnCtBJmU4JBKmsiv-yD7bY8EaYP&_nc_ohc=0RyBAVLmYH4Q7kNvwGz_xSQ&_nc_oc=AdmIV5jq6lUV_imL1MweK5FcZ7v7I1-czw3OqJ6S-q-5WKMHGNtvIez0nvPfla1qGlCLtehnD7Z9zmTG8rt50Kkp&_nc_zt=23&_nc_ht=scontent.fbkk5-6.fna&_nc_gid=BRGp36QCgbWKBP09JMhfjQ&oh=00_AfkRVcRrn0SXWmBTZsdv0ZDJkJ_T33xh1U3FhuZ9Eqmr2Q&oe=695AC178" alt="Memory 1">
                </div>
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-3.fna.fbcdn.net/v/t39.30808-6/603902658_25890105430620333_1252911019668480542_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeHd72kfXr403IzkdmyuURkbyYv7DljcpQTJi_sOWNylBDaDkf4mDzKbxVkm-lFXHClFOH7eZ_tnWo0vJc1gxHnj&_nc_ohc=t9foykoVcT4Q7kNvwHGORRz&_nc_oc=AdkCOMFVb9X05kgZ8-8kWfzctHbSV5Vx9ne2BOlGdCOSEdtJgXqW7Flz3GncZNdYw7TSGm6p-UfIpnQmyZUH2OcH&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=twu7diwN6A13B32eq6thxw&oh=00_AfnJB3i6evRXRXs0AIw03ggJimy1GXyO2Q7fYJzxKTK5Bg&oe=695AD12D" alt="Memory 2">
                </div>
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-1.fna.fbcdn.net/v/t39.30808-6/603846946_25890105567286986_4530808047179501060_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=109&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeEeVaT16hZVfTXKxtA7dsbK99Ulk_xxuaj31SWT_HG5qL9y0lWRXS1J9P4dLxAlxWAQHKLEiGZ1-sicXVN9-QKi&_nc_ohc=6WFyeSqyrY4Q7kNvwEO4PCc&_nc_oc=Adk7m9M6Zhs0DbxfMqtMRDO8NoL4PbS6IexUxlEFmlzL5PQZ50EwV066pFNFz8vgzArsDPXEctOLTcyp80uVmH-W&_nc_zt=23&_nc_ht=scontent.fbkk5-1.fna&_nc_gid=Yj8_X3XILL3spMifigm5tw&oh=00_Afl8Bw7PTk78vk7EGNnPhG6MKJoodwqTd83HG97rNo2PWQ&oe=695AE93F" alt="Memory 3">
                </div>
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-4.fna.fbcdn.net/v/t39.30808-6/604672139_25890105493953660_4429082875243709614_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=110&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeF8dMqT_cW--sGefmYXZXiHbXtsJ9c_sIlte2wn1z-widi5U6-U_UKtUNQ4UzpUWmxGbyBsb8Y7sBRqDaeW5xyd&_nc_ohc=4uZKcXoPEYoQ7kNvwFp0voY&_nc_oc=AdmB8R-sXqBEj5Q0GpA6sLRIcyh87ynIdECDNZg4QAA62GWirgi50DRZPWGcSVZbDhAkaKfy0jeutrKVsU6zclr4&_nc_zt=23&_nc_ht=scontent.fbkk5-4.fna&_nc_gid=hYPzdR7ft0LLC25Ihc0CjA&oh=00_Afkz04wY7GPMPUCOtETgjvSc3L6gFOO5BGQkjF7m4i6jtQ&oe=695AEE2A" alt="Memory 4">
                </div>
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-6.fna.fbcdn.net/v/t39.30808-6/605742515_25890105527286990_8363855017126890039_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=101&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeFu9u0ojSjiHuTaO1orDnwrdcAzZhMp-2V1wDNmEyn7ZUvH84iwlsfPj5M5QM6GEpHMMMfhq2ZsCRNtdw6Q_2Q_&_nc_ohc=_vozGLokUgsQ7kNvwGsmAAj&_nc_oc=Admk23TXy-JWXNN4BVudJDI6f9PizQdwB8nwz-uPQl-cpuwmbkYi2LjivPKFkekFMaMJ0cxnFLBUjPqdkwsebls9&_nc_zt=23&_nc_ht=scontent.fbkk5-6.fna&_nc_gid=tOUK6BVnTKQKPEw0qWCrIA&oh=00_AflX_G3e-XrxndyRD0vAEOhzZ_kx_twu0y6QwYylbFhVkA&oe=695AE448" alt="Memory 5">
                </div>
                <div class="polaroid" onclick="openLightbox(this.querySelector('img').src)">
                    <img src="https://scontent.fbkk5-1.fna.fbcdn.net/v/t39.30808-6/603873566_25890105470620329_4760858287554819600_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=109&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeGtozVD_DcatcZyhAOAMxivgLiekPNVkOWAuJ6Q81WQ5TrBvsFKd43EHmH84M9Fq7V_YFN1Pd1xirVKuHXjwzQb&_nc_ohc=NsYk3ZXixn4Q7kNvwEyaZQX&_nc_oc=Adm0wM3TOtAFWGgJhUOMGtEm_9cfwQ2sH7V_YnhH3O_fDgY0POvFJhsGsDAGdWu02YWROYm9bLkbiggxiUOzG7ep&_nc_zt=23&_nc_ht=scontent.fbkk5-1.fna&_nc_gid=s2p9pW-Dffy30AybmR3hrQ&oh=00_AfkgeJ7--zV9TS3FWPCFfXWr8b7qlW4RfWR-_breDePV0w&oe=695AE73F" alt="Memory 6">
                </div>
            </div>

            <h3 style="font-size: 2rem; margin-bottom: 20px; color: var(--gold-color);">Our 2026 Bucket List</h3>
            <ul class="bucket-list">
                <li class="bucket-item checked">
                    <div class="check-box">‚úì</div>
                    <span>Staying together & happy</span>
                </li>
                <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° tryCheckItem ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° -->
                <li class="bucket-item" onclick="tryCheckItem(this)">
                    <div class="check-box"></div>
                    <span>Go on a Romantic Trip Upcountry üöó</span>
                </li>
                <li class="bucket-item" onclick="tryCheckItem(this)">
                    <div class="check-box"></div>
                    <span>Save money for Japan Trip ‚úàÔ∏è</span>
                </li>
                <li class="bucket-item" onclick="tryCheckItem(this)">
                    <div class="check-box"></div>
                    <span>Eat lots of delicious food together üç±</span>
                </li>
            </ul>
        </div>

    </div>

    <script>
        // ================= CONFIGURATION =================
        // Date Format: Year, Month (0-11), Day, Hour, Minute
        // Note: Month is 0-indexed (Nov is 10)
        const START_DATE = new Date(2025, 10, 3, 16, 0, 0); 

        // ================= LOGIC =================
        
        let tilesRevealed = 0;
        const totalTiles = 9;

        // 1. Start Celebration (Phase 1 -> Phase 2 -> Phase 3)
        function startCelebration() {
            // Hide Landing
            document.getElementById('phase-1').classList.add('hidden');
            
            // Play Music (Browsers require interaction to play audio)
            const audio = document.getElementById('bg-music');
            
            // ‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ: 0.2 ‡∏Ñ‡∏∑‡∏≠ 20% (‡πÄ‡∏ö‡∏≤‡πÜ ‡∏Ñ‡∏•‡∏≠‡πÜ)
            audio.volume = 0.2; 
            
            audio.play().catch(e => console.log("Audio requires interaction"));

            // Start Fireworks
            initFireworks();

            // Wait 3 seconds then show content
            setTimeout(() => {
                const phase3 = document.getElementById('phase-3');
                phase3.classList.remove('hidden');
                phase3.classList.add('fade-in');
            }, 3000);
        }

        // 2. Timer Logic
        function updateTimer() {
            const now = new Date();
            const diff = now - START_DATE;

            if (diff < 0) {
                // If date is in future (debugging purposes)
                document.getElementById('days').innerText = "0";
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            document.getElementById('days').innerText = days;
            document.getElementById('hours').innerText = hours;
            document.getElementById('minutes').innerText = minutes;
            document.getElementById('seconds').innerText = seconds;
        }

        setInterval(updateTimer, 1000);
        updateTimer(); // Initial call

        // 3. Grid Reveal Logic
        function revealTile(element) {
            if (!element.classList.contains('revealed')) {
                element.classList.add('revealed');
                tilesRevealed++;

                // Check if all revealed
                if (tilesRevealed === totalTiles) {
                    setTimeout(() => {
                        const surprise = document.getElementById('final-surprise');
                        surprise.classList.remove('hidden');
                        surprise.classList.add('fade-in');
                        
                        // Auto scroll to surprise
                        surprise.scrollIntoView({ behavior: 'smooth' });
                    }, 800);
                }
            }
        }

        // 4. Lightbox (Zoom) Logic
        function openLightbox(src) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            
            lightboxImg.src = src;
            lightbox.classList.add('active');
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
        }

        // 5. Bucket List Interaction Logic (Shake & Toast)
        function tryCheckItem(element) {
            // Add shake effect to the body (screenshake)
            document.body.classList.add('shake-screen');
            
            // Show toast message
            showToast("Not accomplished yet! üòú");

            // Remove shake class after animation ends to allow it to be triggered again
            setTimeout(() => {
                document.body.classList.remove('shake-screen');
            }, 500);
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.innerText = message;
            toast.className = "show";
            
            // Hide toast after 3 seconds
            setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
        }

        // 6. Lightweight Fireworks Engine (Canvas)
        function initFireworks() {
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let particles = [];

            function Particle(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                // Random velocity
                this.vx = (Math.random() - 0.5) * 8;
                this.vy = (Math.random() - 0.5) * 8;
                this.alpha = 1;
                this.friction = 0.96; // Slow down
                this.gravity = 0.05; // Fall down
            }

            Particle.prototype.draw = function() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }

            Particle.prototype.update = function() {
                this.vx *= this.friction;
                this.vy *= this.friction;
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= 0.015; // Fade out
            }

            function createFirework(x, y) {
                const colors = ['#ff4d6d', '#ffd700', '#ffffff', '#ff8fa3'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                for (let i = 0; i < 30; i++) {
                    particles.push(new Particle(x, y, color));
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                
                // --- FIX: Use destination-out to create transparent trails ---
                // Instead of drawing black on top, we fade out existing pixels
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Reset to draw new particles
                ctx.globalCompositeOperation = 'source-over'; 
                // -----------------------------------------------------------

                // Update particles
                particles.forEach((p, index) => {
                    p.update();
                    p.draw();
                    if (p.alpha <= 0) particles.splice(index, 1);
                });

                // Random explosions
                if (Math.random() < 0.05) {
                    createFirework(
                        Math.random() * canvas.width, 
                        Math.random() * canvas.height * 0.6 // Top 60% of screen
                    );
                }
            }

            animate();
            
            // Resize handler
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }
    </script>
</body>
</html>
